define("form_scenario","init",function(){var i={Gcoc:["Gcoe","Gcom"],Gcoe:["Gcom"]},r={"#form-item_schools":{need:"city",placeholder:[L("Начните вводить название школы"),L("Сначала выберите страну и город")],hide:".school_selector #form-item_graduation_year"},"#form-item_universities":{need:"city",placeholder:[L("Начните вводить название ВУЗа"),L("Сначала выберите страну и город")],hide:".university_selector #form-item_graduation_year"},"#form-item_mil_unit":{need:"country"},"#form-item_career":{need:"country"}},t={schools:{deps:"#form-item_class-selector, #form-item_years, .school_selector #form-item_graduation_year, #form-item_specialization, #form-item_access-read",hide:!0},universities:{deps:"#form-item_years, .university_selector #form-item_graduation_year, #form-item_faculty, #form-item_group, #form-item_group, #form-item_chair, #form-item_Form, #form-item_Status, #form-item_chair, #form-item_access-read",hide:!0},faculty:{deps:"#form-item_chair",hide:!1},career:{deps:"#form-item_years, #form-item_position, #form-item_description, #form-item_access-read, #form-item_new_mil_unit",hide:!0},mil_unit:{deps:"#form-item_years, #form-item_rank, #form-item_description, #form-item_access-read, #form-item_new_mil_unit",hide:!0}};define("form_scenario","onRequest",function(){$("#main").on("objectSelected",function(e,i){if(i.changed){var r=t[i.uniq];r&&$(r.deps).each(function(){var e,t=$(this);t.hasClass("js-objsel")?((e=t.objectSelector()).value().id||i.id||i.empty)&&e.reset():t.find("select").val(""),t.toggleClass("hide",r.hide&&i.empty)})}}).on("geoSelected",function(e,l){var t,f=l.selector.wrap.parents(".js-group:first, .js-parent:first"),_=f.length?f:l.selector.wrap.parents("form");!l.country||l.valid;$.each(r,function(e,t){var i,r,o,s,a,n,m,c=_.find(e).show(),d=c.parents(".js-group:first, .js-parent:first");!d.length==!f.length&&d[0]==f[0]&&(i=!!c.data("fill_error"),r=c.find(".js-fill_error"),o=!i&&!!l[t.need],((s=c.data("can_be_hidden"))||null===s||s===undefined)&&c.toggle(o),c.find(".js-search_btn").toggle(o),r.toggleClass("hide",o),((a=c.find(".js-city_error")).length||i)&&(c.find(".js-toggle_attention").toggleClass("attention",!o),a.toggle(!o)),t.hide&&((n=_.find(t.hide)).hide().find('input[type="text"], select').val(""),Spaces.resetForm(n)),c.each(function(){var e=$(this);e.hasClass("js-objsel")&&(l.changed&&e.objectSelector().reset(),t.placeholder&&!i&&e.find(".js-objsel_input").attr("placeholder",t.placeholder[o?0:1]))}),m=c.find('[type="text"]'),o?m.removeAttr("disabled"):m.attr("disabled","disabled"))}),(t=i[l.id])&&$.each(t,function(e,t){var i=$("#city_fw__"+t).geoSelector();i.isManual()||i.select(l.raw)})})})});