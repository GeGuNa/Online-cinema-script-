define("video_player","init",function(){function i(e,t){var r,a,i=16/9;return e*i==t?[e,t]:(a=t*i,t<(r=e/i)?[Math.round(a),Math.round(a/i)]:[Math.round(r*i),Math.round(r)])}var n=[],r=0,h={240:{w:426,codecs:"avc1.42c00d, mp4a.40.2",index:0},360:{w:640,codecs:"avc1.42c01e, mp4a.40.2",index:1},480:{w:854,codecs:"avc1.4d401e, mp4a.40.2",index:2},720:{w:1280,codecs:"avc1.64001f, mp4a.40.2",index:3},1080:{w:1920,codecs:"avc1.640028, mp4a.40.2",index:4}},p=1,f="vpq",v=(cookie.get("spaces_dummy_vc"),function(e){var t,r='<div class="vp-convert_status js-vc_status"><table><tr class="js-vc_table_status">';for(t=0;t<e.sources.length;++t)r+="<td>"+e.sources[t].res+"p</td>";return r+='</tr></table><div class="upload_pb"><div class="upload_pb_pointer js-vc_pb" style="width: 5%"></div></div><small class="js-vc_status_msg"></small></div>'}),g=function(e){return'<div class="player-dummy_error">'+e+"</div>"},t=function(e){return'<span class="red"><span class="ico ico_alert"></span> '+e+"</span>"},s=function(){return'<span class="ico_player ico_player_play"></span>'},_={},m={},o={},e=!1,w=Class({Static:{instances:[],converted:{},drivers:{},init:function(){page_loader.onShutdown("video_players",function(){IPCSingleton.instance("cp").stop("video"),w.destroyAll()},!0),page_loader.ok()&&page_loader.onJSC("vp",function(e){e=e.split(":"),document.getElementById(e[0])?vplayer(e[0]).onJSC(e):page_loader.setJSC(!1)},!0),"operamini"!=Device.browser&&$(window).on("resize orientationchange",function(){var e,t;for(e in _)(t=_[e])&&t.checkNode()&&t.onResize()}),window.pushstream&&pushstream.on("message","video_convert",function(e){if(e.act==Spaces.LongPollingTypes.VIDEO_CONVERT){var t,r=e.file_type+":"+e.file_id,a=m[r];if(a&&(t=vplayer(a.id,!0)))return t.onConvert(e,a.callback);o[r]||(o[r]=[]),o[r].push(e)}}),define("video_player","onRequire",w.populate)},_populate:function(){$(".js-vp_new").each(function(e,t){vplayer(t).show()})},populate:function(){e||(e=!0,Loader.ready(function(){tick(function(){e=!1,w._populate()})}))},isBusy:function(){var e,t;for(e in _)if((t=_[e])&&t.checkNode()&&t.player&&t.player.isBusy())return!0;return!1},destroy:function(e){_[e]&&_[e].destroy(!0)},destroyAll:function(){for(var e in _)w.destroy(e)},destroyNotAvail:function(){var e,t;for(e in _)(t=_[e])&&!t.checkNode()&&w.destroy(e)},canPlayMP4:function(){var e=document.createElement("video");return e.canPlayType&&e.canPlayType('video/mp4; codecs="'+h[240].codecs+'"')},instance:function(e,t){return _[e]?_[e]:t?null:new w(e)},onConvertRequestDone:function(e,t,r){console.log("Видео успешно поставлено на конвертирование. ",e,t,r)},onConvertRequestError:function(e,t,r,a){if(console.error(e),r){var i,n=m[t+":"+r];if(n&&(i=vplayer(n.id,!0)))return i.setConvError(e)}Spaces.showError(e+(a?"<br />(md5: "+a+")":""))},needNativePlayer:function(){return("ucbrowser"==Device.browser||"operamobile"==Device.browser)&&w.canPlayMP4()},stopAll:function(){var e,t;for(e in _)(t=_[e])&&t.player&&t.player.pause()},getMaxQuality:function(){return this.__max_quality||(this.__max_quality=this._getMaxQuality()),this.__max_quality},_getMaxQuality:function(){var e,t,r,a,i,n,s,o,l=[Math.min($(window).width(),$(window).height()),Math.max($(window).width(),$(window).height())],p=window.screen,u=document.createElement("video"),c=p?Math.min(p.width,p.height):l[0],d=p?Math.max(p.width,p.height):l[1],y=u.canPlayType&&u.canPlayType("video/mp4");if(!d&&!c)return 240;for(a in t=0,r=e=240,h)i=h[a],n=a<=c&&i.w<=d||240==a||!d||!c,s=u.canPlayType&&u.canPlayType('video/mp4; codecs="'+i.codecs+'"'),!n||y&&!s||(!y||-1<s.indexOf("probably")?e=a:t=a),y&&!s||(r=a);return o={q:e,max:r,mp4:y},t&&e<t&&e<360&&(o.q=360),"desktop"==Device.type?o.q=Math.min(o.q,480):o.q=Math.min(r,360),o}},Constructor:function(e){var t,r,a,i=this;if(i.delayed_onready=[],i=this,t=$("#"+e).removeClass("js-vp_new"),i.id=e,!t.length)throw"Player node not found: "+e;if((_[e]=i).params=$.extend({fileId:0,fileType:0,convertLink:null,allow3gp:!1},t.data()),i.player=null,i.params.fileType&&(r=o[i.params.fileType+":"+i.params.fileId]))for(a=0;a<r.length;++a)i.onConvert(r[a],!1);i.src_id=i.params.fileType+"_"+i.params.fileId,i.params.has_3gp=!i.params.convertLink&&i.isFullConverted()},checkNode:function(){return!!ge("#"+this.params.playerId)},onResize:function(){this.player&&this.player.onResize()},setMaxSize:function(e,t){this.player&&this.player.resize(e,t)},show:function(e){var r,t,a,i,n,s,o,l,p,u,c,d,y;if(!this.player){if((t=(r=this).params).playerId=e||r.id,a="player_"+t.playerId+"_"+r.id,i=$("#"+a),n=$("#"+t.playerId),i.length||((i=$('<div id="'+a+'">')).append(n.children()),n.append(i)),s=[],t.convertLink&&(m[t.fileType+":"+t.fileId]={id:r.id,callback:function(){r.show(e)}}),o=w.getMaxQuality(),l=cookie.get(f)||o.q,p=!w.needNativePlayer(),t.external)switch(t.external){case Spaces.ExternalVideo.YOUTUBE:s=[{"default":!0,file:"//www.youtube.com/watch?v="+t.externalId}]}else u=null,c=!1,each(t.src,function(e,t){var r={file:e.link,label:e.res+"p","default":e.converted&&l==e.res};s.push(r),w.canPlayMP4()&&(r.type='video/mp4; codecs="'+h[e.res].codecs+'"'),e.converted&&(u=s.length-1),e.converted&&l==e.res&&(c=!0)}),null===u||c||(s[u]["default"]=!0);if(!r.params.convertLink||r.queued||r.isFullConverted()&&!r.params.allow3gp||(d=function(){var e=t.convertLink+(0<=t.convertLink.indexOf("?")?"&":"?")+"_="+(new Date).getTime()+"&domain="+encodeURIComponent(base_domain());console.error(e),Loader.loadScripts([{src:e}])},r.isFullConverted()||(n.prepend(v({sources:t.src})),r.updateConvStatus({message:window.pushstream?L("Видео конвертируется..."):L("Видео конвертируется. Подождите немного и обновите страницу, чтобы увидеть результат.")})),window.pushstream?pushstream.avail()?d():pushstream.on("connect","video_converter:"+r.id,function(){r.isFullConverted()&&r.params.has_3gp?pushstream.off("connect","video_converter:"+r.id):d()}):d(),r.queued=!0),r.updateConvStatus(),!r.isAvailSources())return this;for(Device.android_app&&t.nativeVideo?r.player=new b(!0):Device.android_app&&(!o.mp4||Device.android()<3)&&!t.external?r.player=new b(!1):r.player=t.external?new C:p?new S:new x,y=r.player,r.player.on("play",function(){var e,t;for(e in _)(t=_[e])&&t!=r&&t.player&&t.player.pause();IPCSingleton.instance("cp").start(function(){w.stopAll()},"video"),n.trigger("video_play")}),r.player.on("pause",function(){IPCSingleton.instance("cp").stop("video")}),r.player.on("error",function(e){n.find(".player-dummy").prepend(g(e)),r.updateConvStatus()}),t.external||(y.on("sources",function(){r.updateAvailSourcesList()}),y.on("sourcechange",function(e){var t=w.getMaxQuality(),r=parseInt(y.getQualityLevels()[e.currentQuality]);t.max<r&&!confirm(L("Скорее всего ваше устройство не поддерживает качество {0}p. Продолжить?",r))?y.setQualityLevel(h[t.q].index):cookie.set(f,r,{expires:1825,path:"/"})})),y.setup({sources:s,id:r.id,player_id:a,preview:t.preview,external:t.external,externalId:t.externalId,file:{id:t.fileId,type:t.fileType,dir:t.fileDir}});r.delayed_onready.length;)y.ready(r.delayed_onready.pop());return this}},updateConvStatus:function(e){var r,a,i,n=this,t=$("#"+n.params.playerId),s=t.find(".js-vc_status"),o=s.find(".js-vc_pb"),l=s.find(".js-vc_status_msg");n.params.external||(e=e||{},r=s.find("table td"),a=0,i={},$.each(n.params.src,function(e,t){$(r[e]).addClass(t.converted?"green":"red"),t.converted&&++a,i[t.res]=t.converted}),i[144]=n.params.has_3gp,i.fail=!!n.cant_play,o.css("width",a/r.length*100+"%"),"message"in e&&l.html(e.message).toggle(!!e.message),$(".js-vc_visible").each(function(){var e=$(this),t=e.data();t.id==n.src_id&&(t.show?e.toggle(!!i[t.show]):t.hide&&e.toggle(!i[t.hide]))}),n.isFullConverted()&&($(".js-vc_fileext").each(function(){var e=$(this);e.data("id")==n.src_id&&e.removeClass("js-vc_fileext").text("mp4")}),s.remove()),$("#player_"+n.params.playerId+"_"+n.id).trigger("vp_resize"))},setConvError:function(e){return this.updateConvStatus({message:e?t(e):""})},updateAvailSourcesList:function(){var e,t=this,r=t.player,a=r.getQualityLevels();for(e=0;e<a.length;++e)r.setQualityVisibly(e,t.params.src[e]&&t.params.src[e].converted)},isAvailSources:function(){var e,t=this,r=0;if(t.params.external)return 1;for(e=0;e<t.params.src.length;++e)t.params.src[e].converted&&++r;return r},isFullConverted:function(){var e,t=this;if(t.params.external)return!0;for(e=0;e<t.params.src.length;++e)if(!t.params.src[e].converted&&!t.params.src[e].not_avail)return!1;return!0},setConverted:function(e,t,r){var a,i=this;for(a=0;a<i.params.src.length;++a)i.params.src[a].res<=e&&(i.params.src[a].converted=!!t)},setNotAvail:function(e){var t,r=this;for(t=0;t<r.params.src.length;++t)r.params.src[t].res>=e&&(r.params.src[t].not_avail=!0)},onConvert:function(e,t){var r,a=this.params,i=this;if(a.convertLink)return 0<e.size&&i._updateFileSize(e.resolution,e.size),0<e.duration&&i._updateDuration(e.duration),console.log("Видео сконвертировано: "+e.resolution+(e.not_avail?" (not_avail)":"")),144==e.resolution?(i.params.has_3gp=!0,void i.updateConvStatus()):(e.not_avail?i.setNotAvail(e.resolution):i.setConverted(e.resolution,!0),r=i.isAvailSources(),i.setConvError(!r&&!e.resolution&&L('Ошибка конвертирования файла. Обратитесь в <a href="/soo/support">Support</a>.')),i.player?i.updateAvailSourcesList():r&&t&&t(),this)},onReady:function(e){return this.player?this.player.ready(e):this.delayed_onready.push(e),this},destroy:function(e){var t=this;window.pushstream&&pushstream.off("connect","video_converter:"+this.params.id),t.player&&(t.player.destroy(),t.player=null,t.delayed_onready=[]),e&&delete _[t.id],window.pushstream&&pushstream.off("connect","video_converter:"+t.id)},_updateFileSize:function(t,r){var a=this;$(".js-vc_filesize").each(function(){var e=$(this);e.data("id")==a.src_id&&e.data("res")==t&&e.html(Spaces.getHumanSize(r)).removeClass("hide")})},_updateDuration:function(t){var r=this;$(".js-vc_duration").each(function(){var e=$(this);e.data("id")==r.src_id&&e.html(r._duration(t))})},_duration:function(e){var t,r=Math.floor(e/3600);return e-=3600*r,e-=60*(t=Math.floor(e/60)),r?r+":"+("0"+t).slice(-2)+":"+("0"+e).slice(-2):t+":"+("0"+e).slice(-2)},onJSC:function(e){var t=this;t.onReady(function(){t.player.onJSC(e)})}}),a=Class({Constructor:function(){this.events={},this.is_ready=!1},destroy:function(){return this},play:function(){return this},pause:function(){return this},playing:function(){return!1},getRenderingMode:function(){return""},getQualityLevel:function(){return 0},getQualityLevels:function(){return[]},setQualityVisibly:function(e,t){return this},setQualityLevel:function(e){return this},onResize:function(){return this},isReady:function(){return this.is_ready},ready:function(e){return this.is_ready?e():this.on("ready",e),this},on:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this},_trigger:function(e,t){if(this.events[e])for(var r=0;r<this.events[e].length;++r)this.events[e][r].apply(this,t);return this},isBusy:function(){return!!this.busy},onJSC:function(){page_loader.ok()&&page_loader.setJSC(!1)}}),b=Class({Extends:a,Constructor:function(e){a.call(this),this["native"]=e},setup:function(e){var t,r,a=this;for(a.id="android_"+e.player_id,a.playing=!1,a.file=e.file,t=0;t<e.sources.length;++t)e.sources[t]["default"]&&(a.source=e.sources[t]);(r=$("#"+e.player_id)).find(".player-dummy").click(function(e){e.preventDefault(),a.play()}).append(s()),a.wrap=r,a._trigger("pause"),window.SpacesApp=$.extend(window.SpacesApp||{},{onVideoPlay:function(){a.playing=!0,a._trigger("play")},onVideoPause:function(){a.playing=!1,a._trigger("pause")},onVideoFallback:function(){a["native"]=!1,a.play()}}),a._trigger("ready")},resize:function(e,t){var r=i(e,t);this.wrap.width(r[0]).height(r[1])},destroy:function(){var e=this;return e.destroyed=!0,delete window.SpacesApp.onVideoPlay,delete window.SpacesApp.onVideoPause,e.playing&&(e._trigger("pause"),e.playing=!1),e},play:function(){return this["native"]?SpacesApp.exec("nativeVideo",this.file):SpacesApp.exec("playVideo",{src:this.source.file}),this},pause:function(){return this},playing:function(){return this.playing}}),C=Class({Extends:a,Constructor:function(){a.call(this)},setup:function(e){var t,r,a,i=this;i.playing=!1,i.id="yt_"+e.player_id,(r=(t=$("#"+e.player_id)).find("iframe")[0])||(r=ce("iframe",{className:"player-dummy"},{width:"100%",height:"100%"},{type:"text/html",src:location.protocol+"//www.youtube.com/embed/"+e.externalId+"?enablejsapi=1&autoplay=0&origin="+location.protocol+"//"+location.hostname}),t.addClass("player-dummy_wrap").empty().append(r)),r.id=i.id,i.wrap=t,i.iframe=r,a=function(){i.destroyed||(i.player=new YT.Player(i.id,{events:{onReady:function(){i.player&&(i.is_ready=!0,i._trigger("ready"))},onStateChange:function(e){var t=i.playing,r=e.data;r==YT.PlayerState.PLAYING&&(i.playing=!0),r!=YT.PlayerState.PAUSED&&r!=YT.PlayerState.ENDED||(i.playing=!1),t!=i.playing&&i._trigger(i.playing?"play":"pause")}}}))},n?n.push(a):a(),window.onYouTubeIframeAPIReady||(Loader.loadScripts([{src:"https://www.youtube.com/iframe_api"}],function(){}),window.onYouTubeIframeAPIReady=function(){for(var e=0;e<n.length;++e)n[e]();n=null})},resize:function(e,t){var r=i(e,t);this.wrap.width(r[0]).height(r[1])},destroy:function(){var e=this;return e.destroyed=!0,e.playing&&(e._trigger("pause"),e.playing=!1),e.player&&e.player.destroy(),e.player=null,e},play:function(){return this.player&&this.player.playVideo(),this},pause:function(){return this.player&&this.player.pauseVideo(),this},playing:function(){return this.playing}}),x=Class({Extends:a,Constructor:function(){a.call(this)},setup:function(e){var t,r,a=ge("#"+e.player_id),i=this;e.player_id;for(i.curr_source=0,i.sources=e.sources,i.quality_selector=null,i.player_wrap=ce("div",{className:"vp-html5_wrap"}),i.loading_shadow=ce("div",{className:"vp-html5_loading_shadow"}),i.player_wrap.style.width="100%",i.player_wrap.appendChild(i.loading_shadow),i.player_wrap.addEventListener("click",function(e){e.stopPropagation()},!1),i.player=ce("video",{className:"vp-html5"},{},{preload:"none",controls:"controls",poster:e.preview}),i.player.addEventListener("play",function(){i._trigger("play")},!1),i.player.addEventListener("pause",function(){i._trigger("pause")},!1),i.player.addEventListener("ended",function(){i._trigger("pause")},!1),i.player.style.width="100%",i.player_wrap.appendChild(i.player),a.parentNode.replaceChild(i.player_wrap,a),i.player_wrap.id=e.player_id,1<i.sources.length&&i._renderQualitySelector(),r=t=0;r<i.sources.length;++r)i.sources[r]["default"]&&(t=r);return i._setQualityLevel(t),i._trigger("sources",[{levels:i.getQualityLevels(),currentQuality:i.getQualityLevel()}]),i.onResize(),tick(function(){$("#"+e.player_id).trigger("vp_ready")}),this},resize:function(e,t){i(e,t)},onResize:function(){var e=this,t=$(e.player),r=t.width()*(9/16);Math.floor(r)&&t.height(r)},destroy:function(){var e=this;return e.pause(),e.player.parentNode.removeChild(e.player),e.player_wrap.parentNode.removeChild(e.player_wrap),e.player=null,e.player_wrap=null,e.sources=[],e},getRenderingMode:function(){return"html5"},setQualityVisibly:function(e,t){return 0<=e&&e<this.sources.length&&(this.sources[e].visible=t),this._updateQualitySelector(),this},getQualityLevel:function(){return this.curr_source},setQualityLevel:function(e){return this._setQualityLevel(e)&&this._trigger("sourcechange",[{levels:this.getQualityLevels(),currentQuality:this.getQualityLevel()}]),this},getQualityLevels:function(){var e,t=[];for(e=0;e<this.sources.length;++e)t.push(this.sources[e].label);return t},play:function(){return this.player&&!this.playing()&&this.player.play(),this},pause:function(){return this.player&&this.playing()&&this.player.pause(),this},playing:function(){return this.player&&!this.player.paused},_setQualityLevel:function(e){return 0<=e&&e<this.sources.length&&(this.curr_source=e,this._updateQualitySelector(),this._setSource(this.sources[e].file,!0),!0)},_renderQualitySelector:function(){var r=this,e=ce("div",{innerHTML:'<span class="left">'+L("Выберите качество:")+"&nbsp;</span>",className:"vp-html5_quality_selector"});this.quality_selector=ce("select",{className:"right",onchange:function(e){var t=this.options[this.selectedIndex].value;t!=r.curr_source&&r.setQualityLevel(t)}}),e.appendChild(this.quality_selector),this.player_wrap.appendChild(e)},_updateQualitySelector:function(){var e,t;if(this.quality_selector){for(e=this.quality_selector.options,t=0;t<e.length;++t)e[t].parentNode.removeChild(e[t]),--t;for(t=0;t<this.sources.length;++t)"visible"in this.sources[t]&&!this.sources[t].visible||this.quality_selector.appendChild(ce("option",{value:t,innerHTML:this.sources[t].label}));this.quality_selector.value=this.curr_source}},_setSource:function(e,t){var r,a=this,i=this.player.paused,n=t?a.player.currentTime:0;0<n?(a._setLoading(!0),r=function(){a._setLoading(!1),a.player.pause(),this.currentTime=n,i||a.player.play(),this.removeEventListener("loadedmetadata",r,!1)},a.player.addEventListener("loadedmetadata",r,!1),a.player.src=e,a.player.load(),a.player.play()):a.player.src=e},_setLoading:function(e){var t=this.loading_shadow.style,r=this.player;r.controls=!e,e?(t.width=r.offsetWidth+"px",t.height=r.offsetHeight+"px",t.display="inline-block",r.controls=!1):t.display="none"}}),S=Class({Extends:a,Constructor:function(){a.call(this)},setup:function(r){var a,i,e,t,n,s,o,l=this;page_loader.on("requestend","vplayer"+r.player_id,function(){l.player.setFullscreen(!1)},{persistOnRequest:!0}),page_loader.on("mailrequestend","vplayer"+r.player_id,function(){l.player.setFullscreen(!1)},{persistOnRequest:!0}),e=$("#"+r.player_id),t=Math.floor(e.width()*(9/16)),Math.floor(t)&&(a=$("<div>").css({"min-height":t+"px",position:"relative"}),i=$("<div>").css({position:"absolute",top:0,width:l._resize?l._resize[0]+"px":"100%",height:l._resize?l._resize[1]+"px":"auto","z-index":9999999}),a.append(i),l._stub=e.children().appendTo(i),(l._stub_wrap=a).insertAfter(e),a.append(e)),$("#"+r.player_id).trigger("vp_ready"),l.id=r.player_id,l.busy=!0,l.params=r,n={aspectratio:"16:9",sources:r.sources,flashplayer:BASE_URL+"/libs/jwplayer.flash.swf?"+p,html5player:BASE_URL+"/libs/jwplayer.html5.js?"+p,image:r.preview,primary:"html5",levels_toggle:!1,startparam:"start"},l._resize?(n.width=l._resize[0],n.height=l._resize[1]):n.width="100%",o=s=!1,require("jwplayer",function(){l.destroyed||(jwplayer.utils.saveCookie("qualityLabel",""),l.player=jwplayer(r.player_id).setup(n).onReady(function(e){l.busy=!1;var t=setInterval(function(){var e=$("#"+r.player_id);e.parent()&&e.offset()&&!l.destroyed?e.height()&&(setTimeout(function(){a&&(a.css("min-height","0"),i.css("z-index","0"),setTimeout(function(){i.hide()},100)),$("#"+r.player_id).trigger("vp_ready")},0),clearInterval(t)):clearInterval(t)},1);$("#"+r.player_id).trigger("vp_ready"),l.is_ready=!0,l._trigger("ready"),ge("#"+r.player_id).onclick=function(e){e.stopPropagation&&e.stopPropagation()}}).onQualityChange(function(e){l._trigger("sourcechange",[{levels:l.getQualityLevels(),currentQuality:l.getQualityLevel()}])}).onQualityLevels(function(e){l._trigger("sources",[{levels:l.getQualityLevels(),currentQuality:l.getQualityLevel()}])}).onFullscreen(function(e){Device.android_app&&(SpacesApp.exec("fullscreen",{enable:e.fullscreen}),SpacesApp.exec("pullToRefresh",{enable:!e.fullscreen}),Loader.loaded("gallery",function(){GALLERY.lock(e.fullscreen)}),SpacesApp.exec("sidebar",{enable:!e.fullscreen}),Loader.loaded("sidebar",function(){Sidebar.lock(e.fullscreen)}),document.body.style.position=e.fullscreen?"fixed":"static"),page_loader.ok()&&(e.fullscreen?(page_loader.setJSC("vp",r.id),l.jsc=location.hash):(l.jsc===location.hash&&history.back(),l.jsc=null))}).onPlay(function(e){o&&o(),l.old_playing||l._trigger("play"),l.old_playing=l.playing()}).onPause(function(e){o&&o(),l.old_playing&&l._trigger("pause"),l.old_playing=l.playing()}).onComplete(function(e){l.old_playing&&l._trigger("pause"),l.old_playing=l.playing()}).onError(function(e){if(o&&o(),!s&&"chrome"==Device.browser&&0<=e.message.indexOf("File could not be played")){console.log("chrome save data bug!!!");var t=$("#"+l.id+"_display_button"),r=t.css("display");t.css("display","none"),l.player.stop(),l.player.play(),tick(function(){t.css("display",r),l.player.forceState("IDLE"),l.player.forceState("BUFFERING"),o=function(){l.player.releaseState(),o=!1}}),s=!0}}).onSetupError(function(e){l.busy=!1;var t=e.message;-1<e.message.indexOf("No suitable")&&(t=L("Ваш браузер не поддерживает воспроизведение mp4. "),w.canPlayMP4()||jwplayer.utils.flashVersion()||(t=L("Для воспроизведения видео необходимо установить {0}","<a href='https://get.adobe.com/ru/flashplayer/'>Adobe Flash Player</a>. "))),l._trigger("error",[t])}))})},resize:function(e,t){var r=this,a=i(e,t);r.player?r.player.resize(a[0],a[1]):r._resize=a},onResize:function(){},onJSC:function(e){this.player.setFullscreen(!0)},destroy:function(){var e,t,r=this;r.destroyed=!0,r.player&&(r.player.pause().stop(),r.busy?((e=ge("#"+r.id))&&((t=ce("div",{},{display:"none",visibility:"hidden",opacity:0,height:"0px"})).appendChild(e),document.body.appendChild(t)),r.on("ready",function(){setTimeout(function(){t.parentNode.removeChild(t),r.player.remove()},0)}),r.player.pause().stop()):r.player.remove(),r.destroyed=!0,r._stub_wrap&&r._stub_wrap.append(r._stub.show()))},getRenderingMode:function(){return player.getRenderingMode()},setQualityVisibly:function(e,t){this.params.external||this.player.setLevelVisibly(e,t)},getQualityLevel:function(){return this.player.getCurrentQuality()},setQualityLevel:function(e){return this.params.external||this.player.setCurrentQuality(e),this},getQualityLevels:function(){var e,t=[],r=this.player.getQualityLevels();if(r)for(e=0;e<r.length;++e)t.push(r[e].label);return t},play:function(){return this.player&&!this.playing()&&this.player.play(),this},pause:function(){return this.player&&this.playing()&&this.player.pause(),this},playing:function(){return this.player&&"PLAYING"==this.player.getState()}});window.vplayer=function(e,t){return e instanceof jQuery&&(e=e[0]),"object"==typeof e&&(e.id||(e.id="VP_"+r++),e=e.id),w.instance(e,t)},(window.VideoPlayer=w).init()});