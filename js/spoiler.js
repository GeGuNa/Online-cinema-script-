define("spoiler","init",function(){function g(t){var e,a,i,n,l=[];if(t)for(e=t.split(/,\s*/),a=0;a<e.length;++a)if("."!=e[a].substr(0,1))l.push(ge("#"+e[a]));else for(i=ge(e[a]),n=0;n<i.length;++n)l.push(i[n]);return l}var n={click:function(i){var t,e,a,n,l=g(i.getAttribute("data-hide")),r=g(i.getAttribute("data-show")),s=g(i.getAttribute("data-toggle")),o=i.getAttribute("data-class");for(t=0;t<l.length;++t)addClass(l[t],"hide");for(t=0;t<r.length;++t)removeClass(r[t],"hide");if(0<s.length){for(e=!hasClass(s[0],"hide"),o&&toggleClass(i,o,!e),t=0;t<s.length;++t)a=s[t],(n=ge("#"+a.id+"-icon"))&&(n.src=ICONS_BASEURL+n.getAttribute(e?"data-show":"data-hide")),toggleClass(a,"hide",e);each([["on",e],["off",!e]],function(t){var e,a=ge(".js-spoiler_"+t[0],i);for(e=0;e<a.length;++e)toggleClass(a[e],"hide",t[1])})}return!1},extSpoiler:function(t){var e,a=t.getAttribute("data-id"),i=ge("#"+t.getAttribute("data-place"));return i&&(e=ge("#"+a),i.appendChild(e)),n.toggle(t,a)},toggle:function(t,e){var a,i,n="string"==typeof e?ge("#"+e):e,l="none"==n.style.display;return n.style.display=l?"":"none",a=ge(".spo_desc",t)[0],(i=t.getAttribute("data-desc"))&&a&&(a.innerHTML=ge("#spo-"+i+"-"+ +l).innerHTML),t.getAttribute("data-self-hide")&&(t.style.display="none"),!1},toggleAll:function(t){var e=!+t.getAttribute("data-state");return each(ge(".h_spl"),function(t){toggleClass(t,"hide",e)}),t.setAttribute("data-state",+e),t.innerHTML=e?L("Показать скрытые комментарии"):L("Спрятать скрытые комментарии"),!1},spoiler:function(t){var e=find_parents(t,".spo_all",!0);return n.toggle(t,ge(".spo_text",e)[0])}};window.Spoilers=n,SPACES_MOBILE||require("jq",function(){var i=function(t,e){var a=t.parents(".table__wrap:first");t.toggleClass("hide",!e).data("link").toggleClass("link_active",e),a.length&&a.after(t.addClass("content-bl__top_sep"))};$("body").on("click",".js-replace_link",function(t){t.preventDefault();var e=$(this),a=e.data("widget")||e.parent().find(".replace_widget");e.data("widget",a),a.data("link",e),i(a,!e.hasClass("link_active"))}).action("cancel_link_replace",function(t){t.preventDefault();var e=$(this).parents(".js-replace_widget");i(e,!1)}).on("click",".js-spolier",function(){return n.click(this)})})});