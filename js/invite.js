define("invite","onRequest",function(){$("body").on("click",".js-send_invite",function(e){var i,s,a,t,n;e.preventDefault(),e.stopPropagation(),(i=$(this)).hasClass("js-disable")||($(".text-input_error").removeClass("text-input_error"),s=$(this),a=s.data("type"),t={},n="","sms"==a?(n="friends.inviteSMS",t.phone=$("#js-invite_phone_sms").val(),t.from=$("#js-invite_name_sms").val()):"email"==a&&(n="friends.inviteEmail",t.from=$("#js-invite_name_email").val(),t.email=$("#js-invite_email_email").val(),t.text=$("#js-invite_text_email").val()),t.CK=null,Spaces.api(n,t,function(e){if(e.code==Codes.COMMON.SUCCESS)"sms"==a?i.addClass("btn_clicked js-disable").html('<span class="ico ico_ok_w"></span> '+L("Пригласили {0}",t.phone)):"email"==a&&i.addClass("btn_clicked js-disable").html('<span class="ico ico_ok_w"></span> '+L("Пригласили {0}",t.email)),setTimeout(function(){"sms"==a?($("#js-invite_phone_sms").val(""),$("#js-invite_name_sms").val("")):"email"==a&&($("#js-invite_name_email").val(""),$("#js-invite_email_email").val(""),$("#js-invite_text_email").val("")),i.removeClass("btn_clicked js-disable").html(L("Отправить приглашение"))},3e3),$(".system-message").remove();else{Spaces.showApiError(e);var s=parseInt(e.code);"sms"==a?s==Codes.COMMON.ERR_WRONG_PHONE?$("#js-invite_phone_sms").addClass("text-input_error"):s==Codes.FRIENDS.ERR_FROM&&$("#js-invite_name_sms").addClass("text-input_error"):"email"==a&&(s==Codes.COMMON.ERR_WRONG_EMAIL?$("#js-invite_email_email").addClass("text-input_error"):s==Codes.FRIENDS.ERR_FROM&&$("#js-invite_name_email").addClass("text-input_error"))}},{prefix:"neoapi"}))})});