define("blog_create","init",function(){function n(e){$("#karma_cost").toggleClass("hide",!e),$("#karma_cost_cnt").text(-e),$("#blogs_channel").parents(".js-channel_error_wrap").removeClass("error").find(".js-channel_error").remove()}function t(){var e,a,n=$('input[name="Adult"]'),t=n.parents(".js-checkbox_wrap"),c=n.data("old_checked");r||l?(c===undefined&&n.data("old_checked",n.prop("checked")),n.prop("checked")||n.parents(".js-checkbox").click(),n.attr("disabled","disabled"),(e=$('<input type="hidden" class="js-checkbox_disabled" />')).prop("name",n.prop("name")).val(n.val()),n.parents(".js-checkbox_wrap").append(e),a=L("Ваша запись в блоге автоматически помечена, как запись для взрослых, потому что к ней приложен контент 18+."),l&&(a=L("Ваша запись в блоге автоматически помечена, как запись для взрослых, потому что добавлена в канал 18+.")),t.find(".form-checkbox__descr").removeClass("hide").html(a)):(n.removeAttr("disabled"),n.removeData("old_checked"),c!==undefined&&n.prop("checked")!=c&&n.parents(".js-checkbox").click(),t.find(".form-checkbox__descr").addClass("hide"),t.find(".js-checkbox_disabled").remove())}var r,l,s=function(e){return'<a href="#ch" class="js-usearch_result_val list-link-darkblue list-link" data-hide="1" data-value="'+e.name+'" data-karma_cost="'+e.karma_cost+'" data-adult="'+e.adult+'">'+e.name+"</a>"};UniversalSearch.register("blog_channels",{apiMethod:"neoapi/blogs.findChannel",apiData:{CK:null},param:"q",results:"channels",length:2,hideEmpty:!0,enter:!0,onRender:function(e,a,n){var t,c=[];for(t=0;t<a.channels.length;++t)c.push(s(a.channels[t]));e.html(c.join(""))}}),define("blog_create","onRequest",function(){r=$('.attaches_block [itemprop="requiredMinAge"]').length,l=$(".js-blog_channels").data("adult"),$("#main").on("click",".js-blogs_my_channels button",function(e){e.preventDefault();var a=$(this);$("#blogs_channel input").val(a.val()).trigger("change").trigger("closeSearch"),n(a.data("karma_cost"))}).on("usearch:change","#blogs_channel",function(e,a){l=a.item&&a.item.data("adult"),t(),n(a.item?a.item.data("karma_cost"):0)}).on("onAdultAttach",function(e,a){r=a.hasAdult,t()})})});