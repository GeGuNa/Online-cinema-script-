define("draggable","init",function(e){function S(e,t){var n,r,o,a,i;return r=t+"X",o=t+"Y",(n=(e=e.originalEvent||e).touches)?n.length<2?[n[0][r],n[0][o]]:[a=(n[0][r]+n[1][r])/2,i=(n[0][o]+n[1][o])/2,a-n[0][r],i-n[0][o]]:[e[r],e[o]]}function P(e){if(e&&1<e.length){var t=e[1].clientX-e[0].clientX,n=e[1].clientY-e[0].clientY;return Math.sqrt(t*t+n*n)}return!1}function n(e){for(;e;){if(e===document.body)return!0;e=e.parentNode}return!1}var k,C="draggable-"+Date.now(),_=0,q=!1;Spaces.Inertia=function(){var l,d,s,g,c;extend(this,{start:function(){l=[],Date.now()},add:function(e,t){l&&(l.push([Date.now(),e,t]),l=l.slice(-20))},end:function(){var e,t,n,r,o,a,i,u;if(d=s=g=c=0,l){for(t=l.pop(),n=Date.now(),r=l.length;0<r--&&!(150<n-l[r][0]);)e=l[r];l=null,e&&t&&(o=t[1]-e[1],a=t[2]-e[2],i=Math.sqrt(o*o+a*a),u=t[0]-e[0],d=i/u,s=o/u,g=a/u,c=u)}},speed:function(){return{speed:d,speedX:s,speedY:g,time:c}},inertia:function(e){if(!(d<.1)){var t=d/e,n=s?s*t-e*t*t/2:0,r=g?g*t-e*t*t/2:0;if(t*=530,r*=140,(n*=140)||r)return{x:n,y:r,time:t}}}})},k=[],$.fn.draggable=function(l){var d,e,s,g,c,f,a,v,h,i,p,m,b,w,E,D,y,u,L,x,X,Y,o,M,t,n,r=$(document);if(!1===l)return r.off(".draggable"),r.off(".draggable_tmp"),this.each(function(){var e,t,n,r,o=$(this).removeData(C).off(".draggable").off(".draggable_tmp");for(t=0,n=k.length;t<n;++t)if(k[t].el===o[0]){e=k[t],k.splice(t,1);break}if(!e)return this;r=e.events,o[0].removeEventListener&&r&&each(r,function(e,t){var n,r,o=t.split(" ");for(n=0;n<o.length;++n)for(r=0;r<e[1].length;++r)e[0].removeEventListener(o[n],e[1][r])}),e=null}),this;if(l=$.extend(!0,{selector:null,onlyEvents:!0,disableContextMenu:!0,preventStart:!1,hoverClass:"",fastEvents:!1,detectZoom:!1,forceStart:!1,forceMove:!1,relative:!1,scroll:!1,events:{dragStart:null,dragMove:null,dragEnd:null}},l),!this.length)return!1;if(1<this.length)return this.each(function(){$(this).draggable(l)}),this;if(!(d=this).length)return d;if(d.data(C))return this;if(e={el:this[0]},k.push(e),d.data(C,!0),d.on((l.disableContextMenu?"contextmenu.draggable dblclick.draggable ":"")+"dragstart.draggable dragenter.draggable",function(e){return!1}),$(window),a=l.fastEvents,i=h=v=!1,y=function(e,t){var n,r,o=!0;return a?(n=l.events[e])&&(o=!1===n(t)):(r=new $.Event("sp"+e.toLowerCase()),extend(r,t),d.trigger(r)),o},function(){v&&D&&(y("dragMove",D),D=null)},u=function(e){var t=!!document.addEventListener;e?t?document.addEventListener("mousemove",M,!1):r.on("mousemove.draggable",M):t?document.removeEventListener("mousemove",M):r.off("mousemove",M)},L=l.scroll?"page":"client",(Y=!!l.relative)&&!l.scroll)throw"`relative` depends on `scroll`";return o=function(e){var t,n,r,o,a;if(!(q&&"mousedown"==e.type||(t=(e.originalEvent||e).touches,v||"mousedown"==e.type&&1!=e.which||t&&1<t.length&&i))){if(l.selector){for(n=e.target,r=!1;n;){if(0<jQuery.find(l.selector,this,null,[n]).length){console.log(l.selector,n),r=!0;break}n=n.parentNode}if(!r)return;X=$(n)}else X=d;if(v=!0,(h="touchstart"==e.type)&&(q=!0),o=S(e,L),p=m=0,E=w=b=!1,c=s=o[0],f=g=o[1],Y&&(a=X.offset(),x={x:a.left,y:a.top,w:X.width(),h:X.height()}),M(e,!0),l.preventStart&&t)return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1;h||u(!0)}},M=function(e,t){var n,r,o,a,i,u;if(v&&("mousemove"!=e.type||!h)&&(t||(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()),!1,!(n=(e.originalEvent||e).touches)||n.length))return r=S(e,L),n&&(1<n.length?!1===b&&(b=P(n),p=r[2],m=r[3],y("zoomStart",{})):!1!==b&&(p=r[0]-s,m=r[1]-g,y("zoomEnd",{}),b=!1)),o=r[0]-p,a=r[1]-m,i=!1,w||s-o==0&&g-a==0&&!l.forceStart||(w=!0,y("dragStart",{target:d[0],x:o,y:a,trueTouch:h}),i=l.forceMove),w&&(s!=o||g!=a||i)&&(D={x:o,y:a,dX:o-c,dY:a-f,dirX:s-o<0?-1:1,dirY:g-a<0?-1:1,target:d[0],trueTouch:h},Y&&(D.relX=o-x.x,D.relY=a-x.y,D.rpW=D.relX/x.w,D.rpH=D.relY/x.h),!1!==b&&!1!==(u=P(n))&&(D.scale=u/b),y("dragMove",D),E=!0),s=o,g=a,!1},t=function(e){if((!e.touches||!e.touches.length)&&v&&("mouseup"!=e.type||!h)){if(M(e,!0),x=X=null,(v=!1)!==b&&y("zoomEnd",{}),w&&y("dragEnd",{moved:E,dX:c-s,dY:f-g,x:s,y:g,target:d[0],trueTouch:h}),E)_=Date.now(),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();else if(l.preventStart&&touches){var t=document.elementFromPoint&&document.elementFromPoint(s+window.pageXOffset,g+window.pageYOffset);$(t||d).trigger("click")}h||u(!1)}},n=d[0],e.events={"mouseup mousemove":[document,[M,t]],"touchstart mousedown":[n,[o]],touchmove:[n,[M]],"touchend touchcancel":[n,[t]]},n.addEventListener?(n.addEventListener("touchstart",o,!1),n.addEventListener("touchmove",M,!1),n.addEventListener("touchend",t,!1),n.addEventListener("touchcancel",t,!1),document.addEventListener("mouseup",t,!1)):r.on("mouseup.draggable",t),"msie"==Device.browser&&Device.v<=8?r.on("mousedown.draggable",function(e){var t=d.offset(),n=d.outerWidth(),r=d.outerHeight();if(t.left<=e.pageX&&t.left+n>=e.pageX&&t.top<=e.pageY&&t.top+r>=e.pageY)return o.call(this,e)}):n.addEventListener?n.addEventListener("mousedown",o):d.on("mousedown.draggable",o),this},$.draggableNoClick=function(){return Date.now()-_<100},define("draggable","onRequest",function(){page_loader.ok()&&page_loader.on("pageloaded","draggable",function(){var e,t;for(e=0;e<k.length;++e)n(t=k[e].el)||($(t).draggable(!1),--e)})})});